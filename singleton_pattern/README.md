# 单例模式

## 1. 概念

单例模式是用来控制类型实例的数量的，当需要确保一个类型只有一个实例时，就需要使用单例模式。



## 2. 理解

由于要控制数量，那么可想而之只能把实例的访问进行收口，不能谁来了都能 new 一个出来，所以单例模式还会提供一个访问该实例的全局端口，一般都会命名个 `GetInstance` 之类的函数用作实例访问的端口。

又因为在什么时间创建出实例，单例模式又可以分裂出 `饿汉模式`  和  `懒汉模式` ，前者适用于在程序早期初始化时创建已经确定需要加载的类型实例，比如项目的数据库实例。后者其实就是延迟加载的模式，适合程序执行过程中条件成立才创建加载的类型实例。



## 3. 饿汉模式

这个模式用 Go 语言实现时，借助 Go 的 `init` 函数来实现特别方便，这里不多赘述。

- [hungry](./hungry/hungry.go)



## 4. 懒汉模式

两种方式：

1. 使用 double check；
2. 使用 sync.Once

- [lazy](./lazy/lazy.go)